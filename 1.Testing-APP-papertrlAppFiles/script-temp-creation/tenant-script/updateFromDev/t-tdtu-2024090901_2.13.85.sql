CREATE TABLE vp_payment_unattended_transaction (
    id INT AUTO_INCREMENT PRIMARY KEY,
    sftp_credentials_url VARCHAR(255),
    sftp_credentials_port INT,
    sftp_credentials_username VARCHAR(255),
    sftp_credentials_password VARCHAR(255),
    status CHAR(1));
 

CREATE TABLE vp_payment_config_notification (
    id INT AUTO_INCREMENT PRIMARY KEY,
    config_id INT,
    field_value VARCHAR(255),
    type INT,
    status CHAR(1), 
    FOREIGN KEY (config_id) REFERENCES vp_payment_unattended_transaction(id)
);

CREATE TABLE vp_payment_unattended_scheduler_configuration (
    id INT AUTO_INCREMENT PRIMARY KEY,
    scheduler_type_id INT,
    interval_type VARCHAR(20),
    time VARCHAR(5),
    repeat_every INT,
    day_of_week VARCHAR(20),
    month_day INT,
    month_weekday VARCHAR(20),
    priority_of_month_weekday VARCHAR(20),
    delay_time VARCHAR(5), 
    next_generation_time DATETIME,
    config_id INT,
    start_after_previous_scheduler BOOLEAN,
    status CHAR(1),
    FOREIGN KEY (config_id) REFERENCES vp_payment_unattended_transaction(id)
 
);

CREATE TABLE IF NOT EXISTS `unattended_payment_file_record` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `FileName` varchar(255) NOT NULL,
  `status` varchar(50) DEFAULT NULL,
  `downloadTime` datetime NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),
  PRIMARY KEY (`id`)
);

ALTER TABLE vp_payment_request_import_batch
	ADD COLUMN `import_mst_id` INT(11) NULL AFTER `delete_on`;

INSERT INTO common_notification_email_template (template_name, subject, template_data, event_id, status, created_by, created_on, update_by, update_on, delete_by, delete_on) VALUES ('UNATTENDEND_NOTIFY_EMAIL_TEMPLATE', 'Summary Report: Payment Request File', '<html>\r\n<head>\r\n    <meta charset="UTF-8">\r\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\r\n    <style>\r\n        .mobile>tbody>tr>td:nth-child(2) {\r\n            /* Add your mobile-specific styles here */\r\n            width: 650px;\r\n        }\r\n\r\n        body{\r\n            background: #f4f6f9;\r\n        }\r\n\r\n\r\n        @media only screen and (max-width: 767px) {\r\n            .mobile>tr>td:nth-child(1) {\r\n                /* Add your mobile-specific styles here */\r\n                width: 0;\r\n            }\r\n\r\n            .mobile>tr>td:nth-child(2) {\r\n                /* Add your mobile-specific styles here */\r\n                width: 90%;\r\n            }\r\n\r\n            .mobile>tr>td:nth-child(3) {\r\n                /* Add your mobile-specific styles here */\r\n                width: 0;\r\n            }\r\n        }\r\n    </style>\r\n</head>\r\n<body>\r\n\r\n\r\n\r\n<table  width="100%" border="0" cellpadding="0" cellspacing="0">\r\n    <tr>\r\n        <td colspan="3" style="height: 70px;">\r\n            &nbsp;\r\n        </td>\r\n    </tr>\r\n    <tr>\r\n        <td>&nbsp;</td>\r\n        <td width="650" style="box-shadow: 0 0 11px 0 rgba(57, 57, 57, 0.2); color: #555555; ">\r\n            <table border="0" cellpadding="0" cellspacing="0" width="100%"\r\n                style="background: #fff; font-family: Arial, Helvetica, sans-serif; color: #555; font-size: 14px;">\r\n                <tr>\r\n                    <td colspan="3" style="background: #26464a; height: 5px;"></td>\r\n                </tr>\r\n                <tr>\r\n                    <td colspan="3" height="30">&nbsp;</td>\r\n                </tr>\r\n                <tr>\r\n                    <td style="width: 40px;" width="40px">\r\n\r\n                    </td>\r\n                    <td style="text-align: center;">\r\n                        <img width="163" src="https://papertrl.com/wp-content/uploads/2019/09/logo.png" />\r\n                    </td>\r\n                    <td style="width: 40px;" width="40px">\r\n\r\n                    </td>\r\n                </tr>\r\n                <tr>\r\n                    <td colspan="3" height="40">&nbsp;</td>\r\n                </tr>\r\n                <tr>\r\n                    <td width="40"></td>\r\n                    <td> Dear <span id="EMAIL_SEND_TO" style="font-weight: bold"> (ABC) </span>,</td>\r\n                    <td width="40"></td>\r\n                </tr>\r\n                <tr>\r\n                    <td width="40"></td>\r\n                    <td>&nbsp;</td>\r\n                    <td width="40"></td>\r\n                </tr>\r\n				        <tr>\r\n                    <td width="40"></td>\r\n                    <td>&nbsp;</td>\r\n                    <td width="40"></td>\r\n                </tr>\r\n                <tr>\r\n                    <td width="40"></td>\r\n                    <td> Here is a summary of the payment request \r\n						             file <span id="FILE_NAME" style="font-weight: bold"> (File name) </span> \r\n						             that was processed on <span id="PROCEED_DATE" style="font-weight: bold"> (date) </span> .\r\n                    </td>\r\n                    <td width="40"></td>\r\n                </tr>\r\n                <tr>\r\n                    <td width="40"></td>\r\n                    <td>&nbsp;</td>\r\n                    <td width="40"></td>\r\n                </tr>\r\n				        <tr>\r\n                    <td width="40"></td>\r\n                        <td>\r\n                            <table border="0" cellpadding="0" cellspacing="0" style="font-size: 14px; color: #555555;">\r\n                                <tr>\r\n                                    <td width="40">&nbsp;</td>\r\n                                    <td align="left" style="font-weight: bold"> Number of transactions </td>\r\n                                    <td>: <span id="NUMBER_OF_TRANSACTION"> (Total) </span></td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td width="40">&nbsp;</td>\r\n                                    <td align="left" colspan="2">&nbsp;</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td width="40">&nbsp;</td>\r\n                                    <td align="left" style="font-weight: bold"> Transactions successfully processed </td>\r\n                                    <td>: <span id="NUMBER_OF_PROCESSED"> (Success total) </span></td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td width="40">&nbsp;</td>\r\n                                    <td align="left" colspan="2">&nbsp;</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td width="40">&nbsp;</td>\r\n                                    <td align="left" style="font-weight: bold"> Transactions failed to process </td>\r\n                                    <td>: <span id="FAILD_TO_PROCESEED"> (Failed total) </span></td>\r\n                                </tr>\r\n\r\n                            </table>\r\n                        </td>\r\n                    <td width="40"></td>\r\n                </tr>\r\n				        <tr>\r\n                    <td width="40"></td>\r\n                    <td>&nbsp;</td>\r\n                    <td width="40"></td>\r\n                </tr>\r\n				        <tr>\r\n                    <td width="40"></td>\r\n                    <td>&nbsp;</td>\r\n                    <td width="40"></td>\r\n                </tr>\r\n				        <tr>\r\n                    <td width="40"></td>\r\n                    <td>A detailed report of the failed transaction(s), are enclosed withing this email.</td>\r\n                    <td width="40"></td>\r\n                </tr>\r\n                <tr>\r\n                    <td width="40"></td>\r\n                    <td>&nbsp;</td>\r\n                    <td width="40"></td>\r\n                </tr>\r\n                <tr>\r\n                    <td width="40"></td>\r\n                    <td>Thank You!</td>\r\n                    <td width="40"></td>\r\n                </tr>\r\n                <tr>\r\n                    <td width="40"></td>\r\n                    <td>&nbsp;</td>\r\n                    <td width="40"></td>\r\n                </tr>\r\n                <tr>\r\n                    <td width="40"></td>\r\n                    <td>This is a system-generated email. Please do not reply.</td>\r\n                    <td width="40"></td>\r\n                </tr>\r\n                 <tr>\r\n                    <td width="40"></td>\r\n                    <td>&nbsp;</td>\r\n                    <td width="40"></td>\r\n                </tr>\r\n                <tr>\r\n                    <td width="40"></td>\r\n                    <td>&nbsp;</td>\r\n                    <td width="40"></td>\r\n                </tr>\r\n                <tr>\r\n                    <td width="40"></td>\r\n                    <td><img height="38" src="https://papertrl.com/wp-content/uploads/2019/09/logo.png" /></td>\r\n                    <td width="40"></td>\r\n                </tr>\r\n                <tr>\r\n                    <td width="40"></td>\r\n                    <td>&nbsp;</td>\r\n                    <td width="40"></td>\r\n                </tr>\r\n                <tr>\r\n                    <td width="40"></td>\r\n                    <td>&nbsp;</td>\r\n                    <td width="40"></td>\r\n                </tr>\r\n                <tr>\r\n                    <td width="40"></td>\r\n                    <td style=" font-size: 12px;">This is an automated email. Replies to this message will not be\r\n                        read or responded to. We\'re\r\n                        happy to help you with any questions or concerns you may have. Please contact us directly\r\n                        via\r\n                        <span style="font-weight: bold;">support@papertrl.com</span>\r\n                    </td>\r\n                    <td width="40"></td>\r\n                </tr>\r\n                <tr>\r\n                    <td width="40"></td>\r\n                    <td>&nbsp;</td>\r\n                    <td width="40"></td>\r\n                </tr>\r\n                <tr>\r\n                    <td width="40"></td>\r\n                    <td>&nbsp;</td>\r\n                    <td width="40"></td>\r\n                </tr>\r\n                <tr>\r\n                    <td width="40"></td>\r\n                    <td>&nbsp;</td>\r\n                    <td width="40"></td>\r\n                </tr>\r\n            </table>\r\n        </td>\r\n        <td>&nbsp;</td>\r\n    </tr>\r\n    <tr>\r\n        <td colspan="3" align="center">\r\n            <br /><br />\r\n            <table  align="center" border="0" cellpadding="0" cellspacing="0">\r\n                <tr>\r\n                    <td width="75" align="center"><a href="javascript:void(0)" target="_blank"><img\r\n                                src="https://papertrl-hosting-s3-public.s3.us-east-2.amazonaws.com/PaperTrl-EmailIcons/twitter.png"\r\n                                width="25"></a>\r\n                    </td>\r\n                    \r\n                    <td width="75" align="center"><a href="https://www.facebook.com/PaperTrl" target="_blank"><img\r\n                                src="https://papertrl-hosting-s3-public.s3.us-east-2.amazonaws.com/PaperTrl-EmailIcons/facebook.png"\r\n                                width="25"></a>\r\n                    </td>\r\n                    <td width="75" align="center"><a href="https://www.linkedin.com/company/papertrl"\r\n                            target="_blank"><img\r\n                                src="https://papertrl-hosting-s3-public.s3.us-east-2.amazonaws.com/PaperTrl-EmailIcons/linkedin.png"\r\n                                width="25"></a>\r\n                    </td>\r\n\r\n                </tr>\r\n                <tr>\r\n                    <td>&nbsp;</td>\r\n                </tr>\r\n            </table>\r\n\r\n            <table width="100%" style="font-size: 12px; color: #555; font-family: Arial, Helvetica, sans-serif;">\r\n                <tr>\r\n                    <td align="center">Copyright   2023 PaperTrl. All Rights Reserved.</td>\r\n                </tr>\r\n                <tr>\r\n                    <td align="center">200 E. Campus View Blvd. Suite 200, Columbus, OH 43235</td>\r\n                </tr>\r\n                <tr>\r\n                    <td align="center">&nbsp;</td>\r\n                </tr>\r\n            </table>\r\n        </td>\r\n    </tr>\r\n</table>\r\n</body>\r\n</html>\r\n', 0, 'A', 'admin', '2024-08-13', NULL, NULL, NULL, NULL);
